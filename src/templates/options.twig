{% extends 'pragmatic-plus18/_layout' %}
{% import '_includes/forms' as forms %}

{% set title = 'Opciones' %}
{% set selectedTab = 'options' %}
{% set translations = settings.translations ?? {} %}

{% set defaults = {
  ca: {
    previousText: "Per accedir a aquest web has de ser major d'edat. Hi estàs d'acord?",
    yesText: 'Sí',
    noText: 'No',
    afterText: "Accedint al nostre web certifiques que ets major d'edat i que ets conscient de les regulacions sobre el consum de begudes alcohòliques al teu país."
  },
  es: {
    previousText: 'Para acceder a esta web debes ser mayor de edad. ¿Estás de acuerdo?',
    yesText: 'Sí',
    noText: 'No',
    afterText: 'Accediendo a nuestra web certificas que eres mayor de edad y consciente de las regulaciones sobre el consumo de bebidas alcohólicas en tu país.'
  },
  en: {
    previousText: 'To access this website you must be of legal age. Do you agree?',
    yesText: 'Yes',
    noText: 'No',
    afterText: 'By accessing our website you certify that you are of legal age and aware of the regulations on the consumption of alcoholic beverages in your country.'
  }
} %}

{% block content %}
  <form method="post" accept-charset="UTF-8">
    {{ csrfInput() }}
    {{ actionInput('plugins/save-plugin-settings') }}
    {{ hiddenInput('pluginHandle', 'pragmatic-plus18') }}

    {% for lang in languages %}
      {% set current = translations[lang] ?? {} %}
      {% set fallback = defaults[lang] ?? defaults.es %}

      <hr>
      <h2 style="margin:18px 0 12px;">Idioma {{ lang|upper }}</h2>

      {{ forms.textField({
        label: 'Texto principal',
        id: 'previousText-' ~ lang,
        name: 'settings[translations][' ~ lang ~ '][previousText]',
        value: current.previousText ?? fallback.previousText,
      }) }}

      {{ forms.textField({
        label: 'Texto botón Sí',
        id: 'yesText-' ~ lang,
        name: 'settings[translations][' ~ lang ~ '][yesText]',
        value: current.yesText ?? fallback.yesText,
      }) }}

      {{ forms.textField({
        label: 'Texto botón No',
        id: 'noText-' ~ lang,
        name: 'settings[translations][' ~ lang ~ '][noText]',
        value: current.noText ?? fallback.noText,
      }) }}

      {{ forms.textareaField({
        label: 'Texto legal inferior',
        id: 'afterText-' ~ lang,
        name: 'settings[translations][' ~ lang ~ '][afterText]',
        value: current.afterText ?? fallback.afterText,
        rows: 3,
      }) }}
    {% endfor %}

    <div class="buttons" style="margin-top:24px;">
      <button type="submit" class="btn submit">Guardar</button>
    </div>
  </form>
{% endblock %}
